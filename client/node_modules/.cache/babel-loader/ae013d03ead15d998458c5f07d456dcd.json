{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Logger = _interopRequireDefault(require(\"../Logger\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst log = _Logger.default.child({\n  namespace: 'createProxyController'\n});\n\nconst KNOWN_PROPERTY_NAMES = ['HTTP_PROXY', 'HTTPS_PROXY', 'NO_PROXY'];\n\nconst createProxyController = () => {\n  // eslint-disable-next-line fp/no-proxy\n  return new Proxy({\n    HTTP_PROXY: null,\n    HTTPS_PROXY: null,\n    NO_PROXY: null\n  }, {\n    set: (subject, name, value) => {\n      if (!KNOWN_PROPERTY_NAMES.includes(name)) {\n        throw new Error('Cannot set an unmapped property \"' + name + '\".');\n      }\n\n      subject[name] = value;\n      log.info({\n        change: {\n          name,\n          value\n        },\n        newConfiguration: subject\n      }, 'configuration changed');\n      return true;\n    }\n  });\n};\n\nvar _default = createProxyController;\nexports.default = _default;","map":{"version":3,"sources":["../../src/factories/createProxyController.js"],"names":["log","namespace","KNOWN_PROPERTY_NAMES","HTTP_PROXY","HTTPS_PROXY","NO_PROXY","set","subject","change","value","newConfiguration"],"mappings":";;;;;;;AAEA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;;;;;;;AAQA,MAAMA,GAAG,GAAG,OAAA,CAAA,OAAA,CAAA,KAAA,CAAa;EACvBC,SAAS,EAAE;AADY,CAAb,CAAZ;;AAIA,MAAMC,oBAAoB,GAAG,CAAA,YAAA,EAAA,aAAA,EAA7B,UAA6B,CAA7B;;oCAM0C;EACxC;EACA,OAAO,IAAA,KAAA,CAAU;IACfC,UAAU,EADK,IAAA;IAEfC,WAAW,EAFI,IAAA;IAGfC,QAAQ,EAAE;EAHK,CAAV,EAIJ;IACDC,GAAG,EAAE,CAAA,OAAA,EAAA,IAAA,EAAA,KAAA,KAA0B;MAC7B,IAAI,CAACJ,oBAAoB,CAApBA,QAAAA,CAAL,IAAKA,CAAL,EAA0C;QACxC,MAAM,IAAA,KAAA,CAAU,sCAAA,IAAA,GAAhB,IAAM,CAAN;MACD;;MAEDK,OAAO,CAAPA,IAAO,CAAPA,GAAAA,KAAAA;MAEAP,GAAG,CAAHA,IAAAA,CAAS;QACPQ,MAAM,EAAE;UAAA,IAAA;UAENC;QAFM,CADD;QAKPC,gBAAgB,EAAEH;MALX,CAATP,EAAAA,uBAAAA;MAQA,OAAA,IAAA;IACD;EAjBA,CAJI,CAAP","sourcesContent":["// @flow\n\nimport Logger from '../Logger';\n\ntype ProxyControllerType = {|\n  HTTP_PROXY: string | null,\n  HTTPS_PROXY: string | null,\n  NO_PROXY: string | null,\n|};\n\nconst log = Logger.child({\n  namespace: 'createProxyController',\n});\n\nconst KNOWN_PROPERTY_NAMES = [\n  'HTTP_PROXY',\n  'HTTPS_PROXY',\n  'NO_PROXY',\n];\n\nexport default (): ProxyControllerType => {\n  // eslint-disable-next-line fp/no-proxy\n  return new Proxy({\n    HTTP_PROXY: null,\n    HTTPS_PROXY: null,\n    NO_PROXY: null,\n  }, {\n    set: (subject, name, value) => {\n      if (!KNOWN_PROPERTY_NAMES.includes(name)) {\n        throw new Error('Cannot set an unmapped property \"' + name + '\".');\n      }\n\n      subject[name] = value;\n\n      log.info({\n        change: {\n          name,\n          value,\n        },\n        newConfiguration: subject,\n      }, 'configuration changed');\n\n      return true;\n    },\n  });\n};\n"]},"metadata":{},"sourceType":"script"}