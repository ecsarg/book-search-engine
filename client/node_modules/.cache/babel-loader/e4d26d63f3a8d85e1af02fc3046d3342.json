{"ast":null,"code":"'use strict';\n\nconst pMap = (iterable, mapper, options) => new Promise((resolve, reject) => {\n  options = Object.assign({\n    concurrency: Infinity\n  }, options);\n\n  if (typeof mapper !== 'function') {\n    throw new TypeError('Mapper function is required');\n  }\n\n  const {\n    concurrency\n  } = options;\n\n  if (!(typeof concurrency === 'number' && concurrency >= 1)) {\n    throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${concurrency}\\` (${typeof concurrency})`);\n  }\n\n  const ret = [];\n  const iterator = iterable[Symbol.iterator]();\n  let isRejected = false;\n  let isIterableDone = false;\n  let resolvingCount = 0;\n  let currentIndex = 0;\n\n  const next = () => {\n    if (isRejected) {\n      return;\n    }\n\n    const nextItem = iterator.next();\n    const i = currentIndex;\n    currentIndex++;\n\n    if (nextItem.done) {\n      isIterableDone = true;\n\n      if (resolvingCount === 0) {\n        resolve(ret);\n      }\n\n      return;\n    }\n\n    resolvingCount++;\n    Promise.resolve(nextItem.value).then(element => mapper(element, i)).then(value => {\n      ret[i] = value;\n      resolvingCount--;\n      next();\n    }, error => {\n      isRejected = true;\n      reject(error);\n    });\n  };\n\n  for (let i = 0; i < concurrency; i++) {\n    next();\n\n    if (isIterableDone) {\n      break;\n    }\n  }\n});\n\nmodule.exports = pMap; // TODO: Remove this for the next major release\n\nmodule.exports.default = pMap;","map":{"version":3,"names":["pMap","iterable","mapper","options","Promise","resolve","reject","Object","assign","concurrency","Infinity","TypeError","ret","iterator","Symbol","isRejected","isIterableDone","resolvingCount","currentIndex","next","nextItem","i","done","value","then","element","error","module","exports","default"],"sources":["/Users/Ellie/Desktop/projects/book-search-engine/client/node_modules/listr/node_modules/p-map/index.js"],"sourcesContent":["'use strict';\n\nconst pMap = (iterable, mapper, options) => new Promise((resolve, reject) => {\n\toptions = Object.assign({\n\t\tconcurrency: Infinity\n\t}, options);\n\n\tif (typeof mapper !== 'function') {\n\t\tthrow new TypeError('Mapper function is required');\n\t}\n\n\tconst {concurrency} = options;\n\n\tif (!(typeof concurrency === 'number' && concurrency >= 1)) {\n\t\tthrow new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${concurrency}\\` (${typeof concurrency})`);\n\t}\n\n\tconst ret = [];\n\tconst iterator = iterable[Symbol.iterator]();\n\tlet isRejected = false;\n\tlet isIterableDone = false;\n\tlet resolvingCount = 0;\n\tlet currentIndex = 0;\n\n\tconst next = () => {\n\t\tif (isRejected) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextItem = iterator.next();\n\t\tconst i = currentIndex;\n\t\tcurrentIndex++;\n\n\t\tif (nextItem.done) {\n\t\t\tisIterableDone = true;\n\n\t\t\tif (resolvingCount === 0) {\n\t\t\t\tresolve(ret);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tresolvingCount++;\n\n\t\tPromise.resolve(nextItem.value)\n\t\t\t.then(element => mapper(element, i))\n\t\t\t.then(\n\t\t\t\tvalue => {\n\t\t\t\t\tret[i] = value;\n\t\t\t\t\tresolvingCount--;\n\t\t\t\t\tnext();\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\tisRejected = true;\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t);\n\t};\n\n\tfor (let i = 0; i < concurrency; i++) {\n\t\tnext();\n\n\t\tif (isIterableDone) {\n\t\t\tbreak;\n\t\t}\n\t}\n});\n\nmodule.exports = pMap;\n// TODO: Remove this for the next major release\nmodule.exports.default = pMap;\n"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAG,CAACC,QAAD,EAAWC,MAAX,EAAmBC,OAAnB,KAA+B,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;EAC5EH,OAAO,GAAGI,MAAM,CAACC,MAAP,CAAc;IACvBC,WAAW,EAAEC;EADU,CAAd,EAEPP,OAFO,CAAV;;EAIA,IAAI,OAAOD,MAAP,KAAkB,UAAtB,EAAkC;IACjC,MAAM,IAAIS,SAAJ,CAAc,6BAAd,CAAN;EACA;;EAED,MAAM;IAACF;EAAD,IAAgBN,OAAtB;;EAEA,IAAI,EAAE,OAAOM,WAAP,KAAuB,QAAvB,IAAmCA,WAAW,IAAI,CAApD,CAAJ,EAA4D;IAC3D,MAAM,IAAIE,SAAJ,CAAe,gEAA+DF,WAAY,OAAM,OAAOA,WAAY,GAAnH,CAAN;EACA;;EAED,MAAMG,GAAG,GAAG,EAAZ;EACA,MAAMC,QAAQ,GAAGZ,QAAQ,CAACa,MAAM,CAACD,QAAR,CAAR,EAAjB;EACA,IAAIE,UAAU,GAAG,KAAjB;EACA,IAAIC,cAAc,GAAG,KAArB;EACA,IAAIC,cAAc,GAAG,CAArB;EACA,IAAIC,YAAY,GAAG,CAAnB;;EAEA,MAAMC,IAAI,GAAG,MAAM;IAClB,IAAIJ,UAAJ,EAAgB;MACf;IACA;;IAED,MAAMK,QAAQ,GAAGP,QAAQ,CAACM,IAAT,EAAjB;IACA,MAAME,CAAC,GAAGH,YAAV;IACAA,YAAY;;IAEZ,IAAIE,QAAQ,CAACE,IAAb,EAAmB;MAClBN,cAAc,GAAG,IAAjB;;MAEA,IAAIC,cAAc,KAAK,CAAvB,EAA0B;QACzBZ,OAAO,CAACO,GAAD,CAAP;MACA;;MAED;IACA;;IAEDK,cAAc;IAEdb,OAAO,CAACC,OAAR,CAAgBe,QAAQ,CAACG,KAAzB,EACEC,IADF,CACOC,OAAO,IAAIvB,MAAM,CAACuB,OAAD,EAAUJ,CAAV,CADxB,EAEEG,IAFF,CAGED,KAAK,IAAI;MACRX,GAAG,CAACS,CAAD,CAAH,GAASE,KAAT;MACAN,cAAc;MACdE,IAAI;IACJ,CAPH,EAQEO,KAAK,IAAI;MACRX,UAAU,GAAG,IAAb;MACAT,MAAM,CAACoB,KAAD,CAAN;IACA,CAXH;EAaA,CAlCD;;EAoCA,KAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,WAApB,EAAiCY,CAAC,EAAlC,EAAsC;IACrCF,IAAI;;IAEJ,IAAIH,cAAJ,EAAoB;MACnB;IACA;EACD;AACD,CAjE2C,CAA5C;;AAmEAW,MAAM,CAACC,OAAP,GAAiB5B,IAAjB,C,CACA;;AACA2B,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyB7B,IAAzB"},"metadata":{},"sourceType":"script"}