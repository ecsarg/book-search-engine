{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schemaProviderFromConfig = void 0;\n\nconst config_1 = require(\"../../config\");\n\nconst endpoint_1 = require(\"./endpoint\");\n\nconst engine_1 = require(\"./engine\");\n\nconst file_1 = require(\"./file\");\n\nfunction schemaProviderFromConfig(config, clientIdentity) {\n  if (config.service && config.service.localSchemaFile) {\n    const isListOfSchemaFiles = Array.isArray(config.service.localSchemaFile);\n    return new file_1.FileSchemaProvider(isListOfSchemaFiles ? {\n      paths: config.service.localSchemaFile\n    } : {\n      path: config.service.localSchemaFile\n    });\n  }\n\n  if (config.service && config.service.endpoint) {\n    return new endpoint_1.EndpointSchemaProvider(config.service.endpoint);\n  }\n\n  if ((0, config_1.isClientConfig)(config)) {\n    if (typeof config.client.service === \"string\") {\n      return new engine_1.EngineSchemaProvider(config, clientIdentity);\n    }\n\n    if (config.client.service) {\n      if ((0, config_1.isLocalServiceConfig)(config.client.service)) {\n        const isListOfSchemaFiles = Array.isArray(config.client.service.localSchemaFile);\n        return new file_1.FileSchemaProvider(isListOfSchemaFiles ? {\n          paths: config.client.service.localSchemaFile\n        } : {\n          path: config.client.service.localSchemaFile\n        });\n      }\n\n      return new endpoint_1.EndpointSchemaProvider(config.client.service);\n    }\n  }\n\n  if (config.graph && config.engine) {\n    return new engine_1.EngineSchemaProvider(config, clientIdentity);\n  }\n\n  throw new Error(\"No schema provider was created, because the project type was unable to be resolved from your config. Please add either a client or service config. For more information, please refer to https://go.apollo.dev/t/config\");\n}\n\nexports.schemaProviderFromConfig = schemaProviderFromConfig;","map":{"version":3,"sources":["../../../src/providers/schema/index.ts"],"names":[],"mappings":";;;;;;;AAKA,MAAA,QAAA,GAAA,OAAA,CAAA,cAAA,CAAA;;AAQA,MAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,MAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AASA,SAAgB,wBAAhB,CACE,MADF,EAEE,cAFF,EAEiC;EAK/B,IAAI,MAAM,CAAC,OAAP,IAAkB,MAAM,CAAC,OAAP,CAAe,eAArC,EAAsD;IACpD,MAAM,mBAAmB,GAAG,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,OAAP,CAAe,eAA7B,CAA5B;IACA,OAAO,IAAI,MAAA,CAAA,kBAAJ,CACL,mBAAmB,GACf;MAAE,KAAK,EAAE,MAAM,CAAC,OAAP,CAAe;IAAxB,CADe,GAEf;MAAE,IAAI,EAAE,MAAM,CAAC,OAAP,CAAe;IAAvB,CAHC,CAAP;EAKD;;EAED,IAAI,MAAM,CAAC,OAAP,IAAkB,MAAM,CAAC,OAAP,CAAe,QAArC,EAA+C;IAC7C,OAAO,IAAI,UAAA,CAAA,sBAAJ,CAA2B,MAAM,CAAC,OAAP,CAAe,QAA1C,CAAP;EACD;;EAED,IAAI,CAAA,GAAA,QAAA,CAAA,cAAA,EAAe,MAAf,CAAJ,EAA4B;IAC1B,IAAI,OAAO,MAAM,CAAC,MAAP,CAAc,OAArB,KAAiC,QAArC,EAA+C;MAC7C,OAAO,IAAI,QAAA,CAAA,oBAAJ,CAAyB,MAAzB,EAAiC,cAAjC,CAAP;IACD;;IAED,IAAI,MAAM,CAAC,MAAP,CAAc,OAAlB,EAA2B;MACzB,IAAI,CAAA,GAAA,QAAA,CAAA,oBAAA,EAAqB,MAAM,CAAC,MAAP,CAAc,OAAnC,CAAJ,EAAiD;QAC/C,MAAM,mBAAmB,GAAG,KAAK,CAAC,OAAN,CAC1B,MAAM,CAAC,MAAP,CAAc,OAAd,CAAsB,eADI,CAA5B;QAGA,OAAO,IAAI,MAAA,CAAA,kBAAJ,CACL,mBAAmB,GACf;UAAE,KAAK,EAAE,MAAM,CAAC,MAAP,CAAc,OAAd,CAAsB;QAA/B,CADe,GAEf;UACE,IAAI,EAAE,MAAM,CAAC,MAAP,CAAc,OAAd,CAAsB;QAD9B,CAHC,CAAP;MAOD;;MAED,OAAO,IAAI,UAAA,CAAA,sBAAJ,CAA2B,MAAM,CAAC,MAAP,CAAc,OAAzC,CAAP;IACD;EACF;;EAED,IAAI,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,MAA3B,EAAmC;IACjC,OAAO,IAAI,QAAA,CAAA,oBAAJ,CAAyB,MAAzB,EAAiD,cAAjD,CAAP;EACD;;EAED,MAAM,IAAI,KAAJ,CACJ,yNADI,CAAN;AAGD;;AAlDD,OAAA,CAAA,wBAAA,GAAA,wBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.schemaProviderFromConfig = void 0;\nconst config_1 = require(\"../../config\");\nconst endpoint_1 = require(\"./endpoint\");\nconst engine_1 = require(\"./engine\");\nconst file_1 = require(\"./file\");\nfunction schemaProviderFromConfig(config, clientIdentity) {\n    if (config.service && config.service.localSchemaFile) {\n        const isListOfSchemaFiles = Array.isArray(config.service.localSchemaFile);\n        return new file_1.FileSchemaProvider(isListOfSchemaFiles\n            ? { paths: config.service.localSchemaFile }\n            : { path: config.service.localSchemaFile });\n    }\n    if (config.service && config.service.endpoint) {\n        return new endpoint_1.EndpointSchemaProvider(config.service.endpoint);\n    }\n    if ((0, config_1.isClientConfig)(config)) {\n        if (typeof config.client.service === \"string\") {\n            return new engine_1.EngineSchemaProvider(config, clientIdentity);\n        }\n        if (config.client.service) {\n            if ((0, config_1.isLocalServiceConfig)(config.client.service)) {\n                const isListOfSchemaFiles = Array.isArray(config.client.service.localSchemaFile);\n                return new file_1.FileSchemaProvider(isListOfSchemaFiles\n                    ? { paths: config.client.service.localSchemaFile }\n                    : {\n                        path: config.client.service.localSchemaFile,\n                    });\n            }\n            return new endpoint_1.EndpointSchemaProvider(config.client.service);\n        }\n    }\n    if (config.graph && config.engine) {\n        return new engine_1.EngineSchemaProvider(config, clientIdentity);\n    }\n    throw new Error(\"No schema provider was created, because the project type was unable to be resolved from your config. Please add either a client or service config. For more information, please refer to https://go.apollo.dev/t/config\");\n}\nexports.schemaProviderFromConfig = schemaProviderFromConfig;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}