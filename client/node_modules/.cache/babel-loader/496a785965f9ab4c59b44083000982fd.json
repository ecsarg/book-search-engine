{"ast":null,"code":"// https://docs.microsoft.com/en-us/azure/devops/pipelines/build/variables\n// The docs indicate that SYSTEM_PULLREQUEST_SOURCEBRANCH and SYSTEM_PULLREQUEST_TARGETBRANCH are in the long format (e.g `refs/heads/master`) however tests show they are both in the short format (e.g. `master`)\nconst {\n  parseBranch\n} = require('../lib/utils.js');\n\nmodule.exports = {\n  detect({\n    env\n  }) {\n    return Boolean(env.BUILD_BUILDURI);\n  },\n\n  configuration({\n    env\n  }) {\n    const pr = env.SYSTEM_PULLREQUEST_PULLREQUESTID;\n    const isPr = Boolean(pr);\n    return {\n      name: 'Azure Pipelines',\n      service: 'azurePipelines',\n      commit: env.BUILD_SOURCEVERSION,\n      build: env.BUILD_BUILDNUMBER,\n      branch: parseBranch(isPr ? env.SYSTEM_PULLREQUEST_TARGETBRANCH : env.BUILD_SOURCEBRANCH),\n      pr,\n      isPr,\n      prBranch: parseBranch(isPr ? env.SYSTEM_PULLREQUEST_SOURCEBRANCH : undefined),\n      root: env.BUILD_REPOSITORY_LOCALPATH\n    };\n  }\n\n};","map":{"version":3,"names":["parseBranch","require","module","exports","detect","env","Boolean","BUILD_BUILDURI","configuration","pr","SYSTEM_PULLREQUEST_PULLREQUESTID","isPr","name","service","commit","BUILD_SOURCEVERSION","build","BUILD_BUILDNUMBER","branch","SYSTEM_PULLREQUEST_TARGETBRANCH","BUILD_SOURCEBRANCH","prBranch","SYSTEM_PULLREQUEST_SOURCEBRANCH","undefined","root","BUILD_REPOSITORY_LOCALPATH"],"sources":["/Users/Ellie/Desktop/projects/book-search-engine/client/node_modules/env-ci/services/azure-pipelines.js"],"sourcesContent":["// https://docs.microsoft.com/en-us/azure/devops/pipelines/build/variables\n// The docs indicate that SYSTEM_PULLREQUEST_SOURCEBRANCH and SYSTEM_PULLREQUEST_TARGETBRANCH are in the long format (e.g `refs/heads/master`) however tests show they are both in the short format (e.g. `master`)\nconst {parseBranch} = require('../lib/utils.js');\n\nmodule.exports = {\n  detect({env}) {\n    return Boolean(env.BUILD_BUILDURI);\n  },\n  configuration({env}) {\n    const pr = env.SYSTEM_PULLREQUEST_PULLREQUESTID;\n    const isPr = Boolean(pr);\n\n    return {\n      name: 'Azure Pipelines',\n      service: 'azurePipelines',\n      commit: env.BUILD_SOURCEVERSION,\n      build: env.BUILD_BUILDNUMBER,\n      branch: parseBranch(isPr ? env.SYSTEM_PULLREQUEST_TARGETBRANCH : env.BUILD_SOURCEBRANCH),\n      pr,\n      isPr,\n      prBranch: parseBranch(isPr ? env.SYSTEM_PULLREQUEST_SOURCEBRANCH : undefined),\n      root: env.BUILD_REPOSITORY_LOCALPATH,\n    };\n  },\n};\n"],"mappings":"AAAA;AACA;AACA,MAAM;EAACA;AAAD,IAAgBC,OAAO,CAAC,iBAAD,CAA7B;;AAEAC,MAAM,CAACC,OAAP,GAAiB;EACfC,MAAM,CAAC;IAACC;EAAD,CAAD,EAAQ;IACZ,OAAOC,OAAO,CAACD,GAAG,CAACE,cAAL,CAAd;EACD,CAHc;;EAIfC,aAAa,CAAC;IAACH;EAAD,CAAD,EAAQ;IACnB,MAAMI,EAAE,GAAGJ,GAAG,CAACK,gCAAf;IACA,MAAMC,IAAI,GAAGL,OAAO,CAACG,EAAD,CAApB;IAEA,OAAO;MACLG,IAAI,EAAE,iBADD;MAELC,OAAO,EAAE,gBAFJ;MAGLC,MAAM,EAAET,GAAG,CAACU,mBAHP;MAILC,KAAK,EAAEX,GAAG,CAACY,iBAJN;MAKLC,MAAM,EAAElB,WAAW,CAACW,IAAI,GAAGN,GAAG,CAACc,+BAAP,GAAyCd,GAAG,CAACe,kBAAlD,CALd;MAMLX,EANK;MAOLE,IAPK;MAQLU,QAAQ,EAAErB,WAAW,CAACW,IAAI,GAAGN,GAAG,CAACiB,+BAAP,GAAyCC,SAA9C,CARhB;MASLC,IAAI,EAAEnB,GAAG,CAACoB;IATL,CAAP;EAWD;;AAnBc,CAAjB"},"metadata":{},"sourceType":"script"}