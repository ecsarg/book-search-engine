{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst errors_1 = require(\"@oclif/errors\");\n\nconst path = require(\"path\");\n\nconst util_1 = require(\"util\");\n\nconst command_1 = require(\"./command\");\n\nconst debug_1 = require(\"./debug\");\n\nconst ts_node_1 = require(\"./ts-node\");\n\nconst util_2 = require(\"./util\");\n\nconst ROOT_INDEX_CMD_ID = '';\n\nconst _pjson = require('../package.json');\n\nconst hasManifest = function (p) {\n  try {\n    require(p);\n\n    return true;\n  } catch (_a) {\n    return false;\n  }\n};\n\nfunction topicsToArray(input, base) {\n  if (!input) return [];\n  base = base ? `${base}:` : '';\n\n  if (Array.isArray(input)) {\n    return input.concat(util_2.flatMap(input, t => topicsToArray(t.subtopics, `${base}${t.name}`)));\n  }\n\n  return util_2.flatMap(Object.keys(input), k => {\n    input[k].name = k;\n    return [Object.assign(Object.assign({}, input[k]), {\n      name: `${base}${k}`\n    })].concat(topicsToArray(input[k].subtopics, `${base}${input[k].name}`));\n  });\n} // essentially just \"cd ..\"\n\n\nfunction* up(from) {\n  while (path.dirname(from) !== from) {\n    yield from;\n    from = path.dirname(from);\n  }\n\n  yield from;\n}\n\nasync function findSourcesRoot(root) {\n  for (const next of up(root)) {\n    const cur = path.join(next, 'package.json'); // eslint-disable-next-line no-await-in-loop\n\n    if (await util_2.exists(cur)) return path.dirname(cur);\n  }\n}\n/**\n * @returns string\n * @param name string\n * @param root string\n * find package root\n * for packages installed into node_modules this will go up directories until\n * it finds a node_modules directory with the plugin installed into it\n *\n * This is needed because some oclif plugins do not declare the `main` field in their package.json\n * https://github.com/oclif/config/pull/289#issuecomment-983904051\n */\n\n\nasync function findRootLegacy(name, root) {\n  for (const next of up(root)) {\n    let cur;\n\n    if (name) {\n      cur = path.join(next, 'node_modules', name, 'package.json'); // eslint-disable-next-line no-await-in-loop\n\n      if (await util_2.exists(cur)) return path.dirname(cur);\n\n      try {\n        // eslint-disable-next-line no-await-in-loop\n        const pkg = await util_2.loadJSON(path.join(next, 'package.json'));\n        if (pkg.name === name) return next;\n      } catch (_a) {}\n    } else {\n      cur = path.join(next, 'package.json'); // eslint-disable-next-line no-await-in-loop\n\n      if (await util_2.exists(cur)) return path.dirname(cur);\n    }\n  }\n}\n\nasync function findRoot(name, root) {\n  if (name) {\n    let pkgPath;\n\n    try {\n      pkgPath = util_2.resolvePackage(name, {\n        paths: [root]\n      });\n    } catch (error) {}\n\n    return pkgPath ? findSourcesRoot(path.dirname(pkgPath)) : findRootLegacy(name, root);\n  }\n\n  return findSourcesRoot(root);\n}\n\nclass Plugin {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(options) {\n    this.options = options; // static loadedPlugins: {[name: string]: Plugin} = {}\n\n    this._base = `${_pjson.name}@${_pjson.version}`;\n    this.valid = false;\n    this.alreadyLoaded = false;\n    this.children = []; // eslint-disable-next-line new-cap\n\n    this._debug = debug_1.default();\n    this.warned = false;\n  }\n\n  async load() {\n    this.type = this.options.type || 'core';\n    this.tag = this.options.tag;\n    const root = await findRoot(this.options.name, this.options.root);\n    if (!root) throw new Error(`could not find package.json with ${util_1.inspect(this.options)}`);\n    this.root = root;\n\n    this._debug('reading %s plugin %s', this.type, root);\n\n    this.pjson = await util_2.loadJSON(path.join(root, 'package.json'));\n    this.name = this.pjson.name;\n    const pjsonPath = path.join(root, 'package.json');\n    if (!this.name) throw new Error(`no name in ${pjsonPath}`);\n    const isProd = hasManifest(path.join(root, 'oclif.manifest.json'));\n    if (!isProd && !this.pjson.files) this.warn(`files attribute must be specified in ${pjsonPath}`); // eslint-disable-next-line new-cap\n\n    this._debug = debug_1.default(this.name);\n    this.version = this.pjson.version;\n\n    if (this.pjson.oclif) {\n      this.valid = true;\n    } else {\n      this.pjson.oclif = this.pjson['cli-engine'] || {};\n    }\n\n    this.hooks = util_2.mapValues(this.pjson.oclif.hooks || {}, i => Array.isArray(i) ? i : [i]);\n    this.manifest = await this._manifest(Boolean(this.options.ignoreManifest), Boolean(this.options.errorOnManifestCreate));\n    this.commands = Object.entries(this.manifest.commands).map(([id, c]) => Object.assign(Object.assign({}, c), {\n      load: () => this.findCommand(id, {\n        must: true\n      })\n    }));\n    this.commands.sort((a, b) => {\n      if (a.id < b.id) return -1;\n      if (a.id > b.id) return 1;\n      return 0;\n    });\n  }\n\n  get topics() {\n    return topicsToArray(this.pjson.oclif.topics || {});\n  }\n\n  get commandsDir() {\n    return ts_node_1.tsPath(this.root, this.pjson.oclif.commands);\n  }\n\n  get commandIDs() {\n    if (!this.commandsDir) return [];\n    let globby;\n\n    try {\n      const globbyPath = require.resolve('globby', {\n        paths: [this.root, __dirname]\n      });\n\n      globby = require(globbyPath);\n    } catch (error) {\n      this.warn(error, 'not loading commands, globby not found');\n      return [];\n    }\n\n    this._debug(`loading IDs from ${this.commandsDir}`);\n\n    const patterns = ['**/*.+(js|ts|tsx)', '!**/*.+(d.ts|test.ts|test.js|spec.ts|spec.js)?(x)'];\n    const ids = globby.sync(patterns, {\n      cwd: this.commandsDir\n    }).map(file => {\n      const p = path.parse(file);\n      const topics = p.dir.split('/');\n      const command = p.name !== 'index' && p.name; // support src/commands/index as a \"root\" command\n\n      if (!command && this.type === 'core' && p.dir.length === 0 && p.name === 'index') return ROOT_INDEX_CMD_ID;\n      return [...topics, command].filter(f => f).join(':');\n    });\n\n    this._debug('found commands', ids);\n\n    return ids;\n  }\n\n  findCommand(id, opts = {}) {\n    const fetch = () => {\n      if (!this.commandsDir) return;\n\n      const search = cmd => {\n        if (typeof cmd.run === 'function') return cmd;\n        if (cmd.default && cmd.default.run) return cmd.default;\n        return Object.values(cmd).find(cmd => typeof cmd.run === 'function');\n      };\n\n      const p = require.resolve(path.join(this.commandsDir, ...id.split(':')));\n\n      this._debug('require', p);\n\n      let m;\n\n      try {\n        m = require(p);\n      } catch (error) {\n        if (!opts.must && error.code === 'MODULE_NOT_FOUND') return;\n        throw error;\n      }\n\n      const cmd = search(m);\n      if (!cmd) return;\n      cmd.id = id;\n      cmd.plugin = this;\n      return cmd;\n    };\n\n    const cmd = fetch();\n    if (!cmd && opts.must) errors_1.error(`command ${id} not found`);\n    return cmd;\n  }\n\n  async _manifest(ignoreManifest, errorOnManifestCreate = false) {\n    const readManifest = async (dotfile = false) => {\n      try {\n        const p = path.join(this.root, `${dotfile ? '.' : ''}oclif.manifest.json`);\n        const manifest = await util_2.loadJSON(p);\n\n        if (!process.env.OCLIF_NEXT_VERSION && manifest.version.split('-')[0] !== this.version.split('-')[0]) {\n          process.emitWarning(`Mismatched version in ${this.name} plugin manifest. Expected: ${this.version} Received: ${manifest.version}\\nThis usually means you have an oclif.manifest.json file that should be deleted in development. This file should be automatically generated when publishing.`);\n        } else {\n          this._debug('using manifest from', p);\n\n          return manifest;\n        }\n      } catch (error) {\n        if (error.code === 'ENOENT') {\n          if (!dotfile) return readManifest(true);\n        } else {\n          this.warn(error, 'readManifest');\n        }\n      }\n    };\n\n    if (!ignoreManifest) {\n      const manifest = await readManifest();\n      if (manifest) return manifest;\n    }\n\n    return {\n      version: this.version,\n      // eslint-disable-next-line array-callback-return\n      commands: this.commandIDs.map(id => {\n        try {\n          return [id, command_1.Command.toCached(this.findCommand(id, {\n            must: true\n          }), this)];\n        } catch (error) {\n          const scope = 'toCached';\n          if (Boolean(errorOnManifestCreate) === false) this.warn(error, scope);else throw this.addErrorScope(error, scope);\n        }\n      }).filter(f => Boolean(f)).reduce((commands, [id, c]) => {\n        commands[id] = c;\n        return commands;\n      }, {})\n    };\n  }\n\n  warn(err, scope) {\n    if (this.warned) return;\n    if (typeof err === 'string') err = new Error(err);\n    process.emitWarning(this.addErrorScope(err, scope));\n  }\n\n  addErrorScope(err, scope) {\n    err.name = `${err.name} Plugin: ${this.name}`;\n    err.detail = util_2.compact([err.detail, `module: ${this._base}`, scope && `task: ${scope}`, `plugin: ${this.name}`, `root: ${this.root}`, 'See more details with DEBUG=*']).join('\\n');\n    return err;\n  }\n\n}\n\nexports.Plugin = Plugin;","map":{"version":3,"names":["Object","defineProperty","exports","value","errors_1","require","path","util_1","command_1","debug_1","ts_node_1","util_2","ROOT_INDEX_CMD_ID","_pjson","hasManifest","p","_a","topicsToArray","input","base","Array","isArray","concat","flatMap","t","subtopics","name","keys","k","assign","up","from","dirname","findSourcesRoot","root","next","cur","join","exists","findRootLegacy","pkg","loadJSON","findRoot","pkgPath","resolvePackage","paths","error","Plugin","constructor","options","_base","version","valid","alreadyLoaded","children","_debug","default","warned","load","type","tag","Error","inspect","pjson","pjsonPath","isProd","files","warn","oclif","hooks","mapValues","i","manifest","_manifest","Boolean","ignoreManifest","errorOnManifestCreate","commands","entries","map","id","c","findCommand","must","sort","a","b","topics","commandsDir","tsPath","commandIDs","globby","globbyPath","resolve","__dirname","patterns","ids","sync","cwd","file","parse","dir","split","command","length","filter","f","opts","fetch","search","cmd","run","values","find","m","code","plugin","readManifest","dotfile","process","env","OCLIF_NEXT_VERSION","emitWarning","Command","toCached","scope","addErrorScope","reduce","err","detail","compact"],"sources":["/Users/Ellie/Desktop/projects/book-search-engine/client/node_modules/@oclif/config/lib/plugin.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"@oclif/errors\");\nconst path = require(\"path\");\nconst util_1 = require(\"util\");\nconst command_1 = require(\"./command\");\nconst debug_1 = require(\"./debug\");\nconst ts_node_1 = require(\"./ts-node\");\nconst util_2 = require(\"./util\");\nconst ROOT_INDEX_CMD_ID = '';\nconst _pjson = require('../package.json');\nconst hasManifest = function (p) {\n    try {\n        require(p);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n};\nfunction topicsToArray(input, base) {\n    if (!input)\n        return [];\n    base = base ? `${base}:` : '';\n    if (Array.isArray(input)) {\n        return input.concat(util_2.flatMap(input, t => topicsToArray(t.subtopics, `${base}${t.name}`)));\n    }\n    return util_2.flatMap(Object.keys(input), k => {\n        input[k].name = k;\n        return [Object.assign(Object.assign({}, input[k]), { name: `${base}${k}` })].concat(topicsToArray(input[k].subtopics, `${base}${input[k].name}`));\n    });\n}\n// essentially just \"cd ..\"\nfunction* up(from) {\n    while (path.dirname(from) !== from) {\n        yield from;\n        from = path.dirname(from);\n    }\n    yield from;\n}\nasync function findSourcesRoot(root) {\n    for (const next of up(root)) {\n        const cur = path.join(next, 'package.json');\n        // eslint-disable-next-line no-await-in-loop\n        if (await util_2.exists(cur))\n            return path.dirname(cur);\n    }\n}\n/**\n * @returns string\n * @param name string\n * @param root string\n * find package root\n * for packages installed into node_modules this will go up directories until\n * it finds a node_modules directory with the plugin installed into it\n *\n * This is needed because some oclif plugins do not declare the `main` field in their package.json\n * https://github.com/oclif/config/pull/289#issuecomment-983904051\n */\nasync function findRootLegacy(name, root) {\n    for (const next of up(root)) {\n        let cur;\n        if (name) {\n            cur = path.join(next, 'node_modules', name, 'package.json');\n            // eslint-disable-next-line no-await-in-loop\n            if (await util_2.exists(cur))\n                return path.dirname(cur);\n            try {\n                // eslint-disable-next-line no-await-in-loop\n                const pkg = await util_2.loadJSON(path.join(next, 'package.json'));\n                if (pkg.name === name)\n                    return next;\n            }\n            catch (_a) { }\n        }\n        else {\n            cur = path.join(next, 'package.json');\n            // eslint-disable-next-line no-await-in-loop\n            if (await util_2.exists(cur))\n                return path.dirname(cur);\n        }\n    }\n}\nasync function findRoot(name, root) {\n    if (name) {\n        let pkgPath;\n        try {\n            pkgPath = util_2.resolvePackage(name, { paths: [root] });\n        }\n        catch (error) { }\n        return pkgPath ? findSourcesRoot(path.dirname(pkgPath)) : findRootLegacy(name, root);\n    }\n    return findSourcesRoot(root);\n}\nclass Plugin {\n    // eslint-disable-next-line no-useless-constructor\n    constructor(options) {\n        this.options = options;\n        // static loadedPlugins: {[name: string]: Plugin} = {}\n        this._base = `${_pjson.name}@${_pjson.version}`;\n        this.valid = false;\n        this.alreadyLoaded = false;\n        this.children = [];\n        // eslint-disable-next-line new-cap\n        this._debug = debug_1.default();\n        this.warned = false;\n    }\n    async load() {\n        this.type = this.options.type || 'core';\n        this.tag = this.options.tag;\n        const root = await findRoot(this.options.name, this.options.root);\n        if (!root)\n            throw new Error(`could not find package.json with ${util_1.inspect(this.options)}`);\n        this.root = root;\n        this._debug('reading %s plugin %s', this.type, root);\n        this.pjson = await util_2.loadJSON(path.join(root, 'package.json'));\n        this.name = this.pjson.name;\n        const pjsonPath = path.join(root, 'package.json');\n        if (!this.name)\n            throw new Error(`no name in ${pjsonPath}`);\n        const isProd = hasManifest(path.join(root, 'oclif.manifest.json'));\n        if (!isProd && !this.pjson.files)\n            this.warn(`files attribute must be specified in ${pjsonPath}`);\n        // eslint-disable-next-line new-cap\n        this._debug = debug_1.default(this.name);\n        this.version = this.pjson.version;\n        if (this.pjson.oclif) {\n            this.valid = true;\n        }\n        else {\n            this.pjson.oclif = this.pjson['cli-engine'] || {};\n        }\n        this.hooks = util_2.mapValues(this.pjson.oclif.hooks || {}, i => Array.isArray(i) ? i : [i]);\n        this.manifest = await this._manifest(Boolean(this.options.ignoreManifest), Boolean(this.options.errorOnManifestCreate));\n        this.commands = Object.entries(this.manifest.commands)\n            .map(([id, c]) => (Object.assign(Object.assign({}, c), { load: () => this.findCommand(id, { must: true }) })));\n        this.commands.sort((a, b) => {\n            if (a.id < b.id)\n                return -1;\n            if (a.id > b.id)\n                return 1;\n            return 0;\n        });\n    }\n    get topics() {\n        return topicsToArray(this.pjson.oclif.topics || {});\n    }\n    get commandsDir() {\n        return ts_node_1.tsPath(this.root, this.pjson.oclif.commands);\n    }\n    get commandIDs() {\n        if (!this.commandsDir)\n            return [];\n        let globby;\n        try {\n            const globbyPath = require.resolve('globby', { paths: [this.root, __dirname] });\n            globby = require(globbyPath);\n        }\n        catch (error) {\n            this.warn(error, 'not loading commands, globby not found');\n            return [];\n        }\n        this._debug(`loading IDs from ${this.commandsDir}`);\n        const patterns = [\n            '**/*.+(js|ts|tsx)',\n            '!**/*.+(d.ts|test.ts|test.js|spec.ts|spec.js)?(x)',\n        ];\n        const ids = globby.sync(patterns, { cwd: this.commandsDir })\n            .map(file => {\n            const p = path.parse(file);\n            const topics = p.dir.split('/');\n            const command = p.name !== 'index' && p.name;\n            // support src/commands/index as a \"root\" command\n            if (!command && this.type === 'core' && p.dir.length === 0 && p.name === 'index')\n                return ROOT_INDEX_CMD_ID;\n            return [...topics, command].filter(f => f).join(':');\n        });\n        this._debug('found commands', ids);\n        return ids;\n    }\n    findCommand(id, opts = {}) {\n        const fetch = () => {\n            if (!this.commandsDir)\n                return;\n            const search = (cmd) => {\n                if (typeof cmd.run === 'function')\n                    return cmd;\n                if (cmd.default && cmd.default.run)\n                    return cmd.default;\n                return Object.values(cmd).find((cmd) => typeof cmd.run === 'function');\n            };\n            const p = require.resolve(path.join(this.commandsDir, ...id.split(':')));\n            this._debug('require', p);\n            let m;\n            try {\n                m = require(p);\n            }\n            catch (error) {\n                if (!opts.must && error.code === 'MODULE_NOT_FOUND')\n                    return;\n                throw error;\n            }\n            const cmd = search(m);\n            if (!cmd)\n                return;\n            cmd.id = id;\n            cmd.plugin = this;\n            return cmd;\n        };\n        const cmd = fetch();\n        if (!cmd && opts.must)\n            errors_1.error(`command ${id} not found`);\n        return cmd;\n    }\n    async _manifest(ignoreManifest, errorOnManifestCreate = false) {\n        const readManifest = async (dotfile = false) => {\n            try {\n                const p = path.join(this.root, `${dotfile ? '.' : ''}oclif.manifest.json`);\n                const manifest = await util_2.loadJSON(p);\n                if (!process.env.OCLIF_NEXT_VERSION && manifest.version.split('-')[0] !== this.version.split('-')[0]) {\n                    process.emitWarning(`Mismatched version in ${this.name} plugin manifest. Expected: ${this.version} Received: ${manifest.version}\\nThis usually means you have an oclif.manifest.json file that should be deleted in development. This file should be automatically generated when publishing.`);\n                }\n                else {\n                    this._debug('using manifest from', p);\n                    return manifest;\n                }\n            }\n            catch (error) {\n                if (error.code === 'ENOENT') {\n                    if (!dotfile)\n                        return readManifest(true);\n                }\n                else {\n                    this.warn(error, 'readManifest');\n                }\n            }\n        };\n        if (!ignoreManifest) {\n            const manifest = await readManifest();\n            if (manifest)\n                return manifest;\n        }\n        return {\n            version: this.version,\n            // eslint-disable-next-line array-callback-return\n            commands: this.commandIDs.map(id => {\n                try {\n                    return [id, command_1.Command.toCached(this.findCommand(id, { must: true }), this)];\n                }\n                catch (error) {\n                    const scope = 'toCached';\n                    if (Boolean(errorOnManifestCreate) === false)\n                        this.warn(error, scope);\n                    else\n                        throw this.addErrorScope(error, scope);\n                }\n            })\n                .filter((f) => Boolean(f))\n                .reduce((commands, [id, c]) => {\n                commands[id] = c;\n                return commands;\n            }, {}),\n        };\n    }\n    warn(err, scope) {\n        if (this.warned)\n            return;\n        if (typeof err === 'string')\n            err = new Error(err);\n        process.emitWarning(this.addErrorScope(err, scope));\n    }\n    addErrorScope(err, scope) {\n        err.name = `${err.name} Plugin: ${this.name}`;\n        err.detail = util_2.compact([err.detail, `module: ${this._base}`, scope && `task: ${scope}`, `plugin: ${this.name}`, `root: ${this.root}`, 'See more details with DEBUG=*']).join('\\n');\n        return err;\n    }\n}\nexports.Plugin = Plugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}