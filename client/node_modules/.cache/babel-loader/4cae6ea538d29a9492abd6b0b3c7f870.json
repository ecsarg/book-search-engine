{"ast":null,"code":"// https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables\nconst {\n  parseBranch\n} = require('../lib/utils.js');\n\nconst getPrEvent = ({\n  env\n}) => {\n  try {\n    const event = env.GITHUB_EVENT_PATH ? require(env.GITHUB_EVENT_PATH) : undefined;\n\n    if (event && event.pull_request) {\n      return {\n        branch: event.pull_request.base ? parseBranch(event.pull_request.base.ref) : undefined,\n        pr: event.pull_request.number\n      };\n    }\n  } catch {// Noop\n  }\n\n  return {\n    pr: undefined,\n    branch: undefined\n  };\n};\n\nconst getPrNumber = env => {\n  const event = env.GITHUB_EVENT_PATH ? require(env.GITHUB_EVENT_PATH) : undefined;\n  return event && event.pull_request ? event.pull_request.number : undefined;\n};\n\nmodule.exports = {\n  detect({\n    env\n  }) {\n    return Boolean(env.GITHUB_ACTIONS);\n  },\n\n  configuration({\n    env,\n    cwd\n  }) {\n    const isPr = env.GITHUB_EVENT_NAME === 'pull_request' || env.GITHUB_EVENT_NAME === 'pull_request_target';\n    const branch = parseBranch(env.GITHUB_EVENT_NAME === 'pull_request_target' ? `refs/pull/${getPrNumber(env)}/merge` : env.GITHUB_REF);\n    return {\n      name: 'GitHub Actions',\n      service: 'github',\n      commit: env.GITHUB_SHA,\n      build: env.GITHUB_RUN_ID,\n      isPr,\n      branch,\n      prBranch: isPr ? branch : undefined,\n      slug: env.GITHUB_REPOSITORY,\n      root: env.GITHUB_WORKSPACE,\n      ...(isPr ? getPrEvent({\n        env,\n        cwd\n      }) : undefined)\n    };\n  }\n\n};","map":{"version":3,"names":["parseBranch","require","getPrEvent","env","event","GITHUB_EVENT_PATH","undefined","pull_request","branch","base","ref","pr","number","getPrNumber","module","exports","detect","Boolean","GITHUB_ACTIONS","configuration","cwd","isPr","GITHUB_EVENT_NAME","GITHUB_REF","name","service","commit","GITHUB_SHA","build","GITHUB_RUN_ID","prBranch","slug","GITHUB_REPOSITORY","root","GITHUB_WORKSPACE"],"sources":["/Users/Ellie/Desktop/projects/book-search-engine/client/node_modules/env-ci/services/github.js"],"sourcesContent":["// https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables\nconst {parseBranch} = require('../lib/utils.js');\n\nconst getPrEvent = ({env}) => {\n  try {\n    const event = env.GITHUB_EVENT_PATH ? require(env.GITHUB_EVENT_PATH) : undefined;\n\n    if (event && event.pull_request) {\n      return {\n        branch: event.pull_request.base ? parseBranch(event.pull_request.base.ref) : undefined,\n        pr: event.pull_request.number,\n      };\n    }\n  } catch {\n    // Noop\n  }\n\n  return {pr: undefined, branch: undefined};\n};\n\nconst getPrNumber = (env) => {\n  const event = env.GITHUB_EVENT_PATH ? require(env.GITHUB_EVENT_PATH) : undefined;\n  return event && event.pull_request ? event.pull_request.number : undefined;\n};\n\nmodule.exports = {\n  detect({env}) {\n    return Boolean(env.GITHUB_ACTIONS);\n  },\n  configuration({env, cwd}) {\n    const isPr = env.GITHUB_EVENT_NAME === 'pull_request' || env.GITHUB_EVENT_NAME === 'pull_request_target';\n    const branch = parseBranch(\n      env.GITHUB_EVENT_NAME === 'pull_request_target' ? `refs/pull/${getPrNumber(env)}/merge` : env.GITHUB_REF\n    );\n\n    return {\n      name: 'GitHub Actions',\n      service: 'github',\n      commit: env.GITHUB_SHA,\n      build: env.GITHUB_RUN_ID,\n      isPr,\n      branch,\n      prBranch: isPr ? branch : undefined,\n      slug: env.GITHUB_REPOSITORY,\n      root: env.GITHUB_WORKSPACE,\n      ...(isPr ? getPrEvent({env, cwd}) : undefined),\n    };\n  },\n};\n"],"mappings":"AAAA;AACA,MAAM;EAACA;AAAD,IAAgBC,OAAO,CAAC,iBAAD,CAA7B;;AAEA,MAAMC,UAAU,GAAG,CAAC;EAACC;AAAD,CAAD,KAAW;EAC5B,IAAI;IACF,MAAMC,KAAK,GAAGD,GAAG,CAACE,iBAAJ,GAAwBJ,OAAO,CAACE,GAAG,CAACE,iBAAL,CAA/B,GAAyDC,SAAvE;;IAEA,IAAIF,KAAK,IAAIA,KAAK,CAACG,YAAnB,EAAiC;MAC/B,OAAO;QACLC,MAAM,EAAEJ,KAAK,CAACG,YAAN,CAAmBE,IAAnB,GAA0BT,WAAW,CAACI,KAAK,CAACG,YAAN,CAAmBE,IAAnB,CAAwBC,GAAzB,CAArC,GAAqEJ,SADxE;QAELK,EAAE,EAAEP,KAAK,CAACG,YAAN,CAAmBK;MAFlB,CAAP;IAID;EACF,CATD,CASE,MAAM,CACN;EACD;;EAED,OAAO;IAACD,EAAE,EAAEL,SAAL;IAAgBE,MAAM,EAAEF;EAAxB,CAAP;AACD,CAfD;;AAiBA,MAAMO,WAAW,GAAIV,GAAD,IAAS;EAC3B,MAAMC,KAAK,GAAGD,GAAG,CAACE,iBAAJ,GAAwBJ,OAAO,CAACE,GAAG,CAACE,iBAAL,CAA/B,GAAyDC,SAAvE;EACA,OAAOF,KAAK,IAAIA,KAAK,CAACG,YAAf,GAA8BH,KAAK,CAACG,YAAN,CAAmBK,MAAjD,GAA0DN,SAAjE;AACD,CAHD;;AAKAQ,MAAM,CAACC,OAAP,GAAiB;EACfC,MAAM,CAAC;IAACb;EAAD,CAAD,EAAQ;IACZ,OAAOc,OAAO,CAACd,GAAG,CAACe,cAAL,CAAd;EACD,CAHc;;EAIfC,aAAa,CAAC;IAAChB,GAAD;IAAMiB;EAAN,CAAD,EAAa;IACxB,MAAMC,IAAI,GAAGlB,GAAG,CAACmB,iBAAJ,KAA0B,cAA1B,IAA4CnB,GAAG,CAACmB,iBAAJ,KAA0B,qBAAnF;IACA,MAAMd,MAAM,GAAGR,WAAW,CACxBG,GAAG,CAACmB,iBAAJ,KAA0B,qBAA1B,GAAmD,aAAYT,WAAW,CAACV,GAAD,CAAM,QAAhF,GAA0FA,GAAG,CAACoB,UADtE,CAA1B;IAIA,OAAO;MACLC,IAAI,EAAE,gBADD;MAELC,OAAO,EAAE,QAFJ;MAGLC,MAAM,EAAEvB,GAAG,CAACwB,UAHP;MAILC,KAAK,EAAEzB,GAAG,CAAC0B,aAJN;MAKLR,IALK;MAMLb,MANK;MAOLsB,QAAQ,EAAET,IAAI,GAAGb,MAAH,GAAYF,SAPrB;MAQLyB,IAAI,EAAE5B,GAAG,CAAC6B,iBARL;MASLC,IAAI,EAAE9B,GAAG,CAAC+B,gBATL;MAUL,IAAIb,IAAI,GAAGnB,UAAU,CAAC;QAACC,GAAD;QAAMiB;MAAN,CAAD,CAAb,GAA4Bd,SAApC;IAVK,CAAP;EAYD;;AAtBc,CAAjB"},"metadata":{},"sourceType":"script"}