{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requiresUsedOnBase = void 0;\n\nconst graphql_1 = require(\"graphql\");\n\nconst utils_1 = require(\"../../utils\");\n\nconst requiresUsedOnBase = ({\n  name: serviceName,\n  typeDefs\n}) => {\n  const errors = [];\n  graphql_1.visit(typeDefs, {\n    ObjectTypeDefinition(typeDefinition) {\n      if (typeDefinition.fields) {\n        for (const field of typeDefinition.fields) {\n          if (field.directives) {\n            for (const directive of field.directives) {\n              const name = directive.name.value;\n\n              if (name === 'requires') {\n                errors.push(utils_1.errorWithCode('REQUIRES_USED_ON_BASE', utils_1.logServiceAndType(serviceName, typeDefinition.name.value, field.name.value) + `Found extraneous @requires directive. @requires cannot be used on base types.`, utils_1.findDirectivesOnNode(field, 'requires')));\n              }\n            }\n          }\n        }\n      }\n    }\n\n  });\n  return errors;\n};\n\nexports.requiresUsedOnBase = requiresUsedOnBase;","map":{"version":3,"sources":["../../../../src/composition/validate/preComposition/requiresUsedOnBase.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,SAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAGA,MAAA,OAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAKO,MAAM,kBAAkB,GAAG,CAAC;EACjC,IAAI,EAAE,WAD2B;EAEjC;AAFiC,CAAD,KAGV;EACtB,MAAM,MAAM,GAAmB,EAA/B;EAEA,SAAA,CAAA,KAAA,CAAM,QAAN,EAAgB;IACd,oBAAoB,CAAC,cAAD,EAAe;MACjC,IAAI,cAAc,CAAC,MAAnB,EAA2B;QACzB,KAAK,MAAM,KAAX,IAAoB,cAAc,CAAC,MAAnC,EAA2C;UACzC,IAAI,KAAK,CAAC,UAAV,EAAsB;YACpB,KAAK,MAAM,SAAX,IAAwB,KAAK,CAAC,UAA9B,EAA0C;cACxC,MAAM,IAAI,GAAG,SAAS,CAAC,IAAV,CAAe,KAA5B;;cACA,IAAI,IAAI,KAAK,UAAb,EAAyB;gBACvB,MAAM,CAAC,IAAP,CACE,OAAA,CAAA,aAAA,CACE,uBADF,EAEE,OAAA,CAAA,iBAAA,CACE,WADF,EAEE,cAAc,CAAC,IAAf,CAAoB,KAFtB,EAGE,KAAK,CAAC,IAAN,CAAW,KAHb,IAKE,+EAPJ,EAQE,OAAA,CAAA,oBAAA,CAAqB,KAArB,EAA4B,UAA5B,CARF,CADF;cAYD;YACF;UACF;QACF;MACF;IACF;;EAzBa,CAAhB;EA4BA,OAAO,MAAP;AACD,CAnCM;;AAAM,OAAA,CAAA,kBAAA,GAAkB,kBAAlB","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.requiresUsedOnBase = void 0;\nconst graphql_1 = require(\"graphql\");\nconst utils_1 = require(\"../../utils\");\nconst requiresUsedOnBase = ({ name: serviceName, typeDefs, }) => {\n    const errors = [];\n    graphql_1.visit(typeDefs, {\n        ObjectTypeDefinition(typeDefinition) {\n            if (typeDefinition.fields) {\n                for (const field of typeDefinition.fields) {\n                    if (field.directives) {\n                        for (const directive of field.directives) {\n                            const name = directive.name.value;\n                            if (name === 'requires') {\n                                errors.push(utils_1.errorWithCode('REQUIRES_USED_ON_BASE', utils_1.logServiceAndType(serviceName, typeDefinition.name.value, field.name.value) +\n                                    `Found extraneous @requires directive. @requires cannot be used on base types.`, utils_1.findDirectivesOnNode(field, 'requires')));\n                            }\n                        }\n                    }\n                }\n            }\n        },\n    });\n    return errors;\n};\nexports.requiresUsedOnBase = requiresUsedOnBase;\n//# sourceMappingURL=requiresUsedOnBase.js.map"]},"metadata":{},"sourceType":"script"}